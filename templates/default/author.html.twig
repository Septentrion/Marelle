{# Les blocs définis dans de fragment iront s'insérer dans les blocs de même nom défnis dans la page appelée par l'instruction `extends`. Cette hiérarchie peut-être d'une profonceur arbitraire. #}
{% extends 'base.html.twig' %}

{# Affichage du nom de l'auteur comme titre de la page #}
{% block title %}{{ author['name'] }}{% endblock %}

{% block stylesheets %}
    {# La fonction `asset` permet de charger un fichier dans un sous-dossier du dossier 'public', qui est a priori le seul dossier accessible par le navigateur vec des reuqêtes HTTP. #}
    <link href="{{ asset('css/styles.css') }}" rel="stylesheet" />
{% endblock %}

{% block header %}
    {# Normalement le conttenu du bloc parent est _effacé_ par celui du bloc enfant. L'instruction `parent` permet d'agréger les deux. #}
    {{ parent() }}
    <p class="exergue">Tous les matins du monde</p>
{% endblock %}

{% block main %}
<section id="author-list">
    <h1>Liste des livres de : {{ author['name'] }}</h1>

    <section class="catalog">
        {# Une boucle qui itère sur la variable `authors` qui a été définie dans la classe DefaultController #}
        <ul class="works">
            {% for w in author['works'] %}
                <li class="work">
                    <span class="title">{{ w['title'] }}</span>
                    <span class="category">{{ w['category'] }}</span>
                </li>
            {% endfor %}
        </ul>
    </section>
    <footer></footer>
</section>
{% endblock %}

{% block aside %}
    {# Un contrôleur secondaire est exécuté car l'information est contextuelle -> simplification du contrôleur maître #}
    {{ render(controller('App\\Controller\\RequestsController::sameLanguageAuthors', {'lang': author['lang']})) }}
{% endblock %}

{% block footer %}
    <p class="licence">
        Michel Cadennes — Octobre 2020
    </p>
{% endblock %}

